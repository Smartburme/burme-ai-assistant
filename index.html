<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BURME AI - Myanmar's AI Assistant</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/generate.css">
    <link rel="stylesheet" href="assets/css/api.css">
    <link rel="stylesheet" href="assets/css/setting.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Favicon -->
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">
</head>
<body>
    <!-- Loader Screen -->
    <div id="loader" class="loader">
        <div class="loader-content">
            <div class="loader-spinner"></div>
            <div class="loader-text">BURME AI ကိုစတင်နေပါသည်...</div>
            <div class="progress-bar">
                <div class="progress"></div>
            </div>
        </div>
    </div>

    <!-- Sidebar Navigation -->
    <div id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <div class="logo-container">
                <img src="assets/images/logo.png" alt="BURME AI Logo" class="logo">
                <h2>BURME AI</h2>
            </div>
            <button id="closeSidebar" class="close-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="menu-items">
            <button class="menu-item active" data-page="main.html">
                <i class="fas fa-comment-dots"></i>
                <span>စကားပြော</span>
                <i class="fas fa-chevron-right arrow"></i>
            </button>
            <button class="menu-item" data-page="text.html">
                <i class="fas fa-font"></i>
                <span>စာသားထုတ်ခြင်း</span>
                <i class="fas fa-chevron-right arrow"></i>
            </button>
            <button class="menu-item" data-page="image.html">
                <i class="fas fa-image"></i>
                <span>ပုံထုတ်ခြင်း</span>
                <i class="fas fa-chevron-right arrow"></i>
            </button>
            <button class="menu-item" data-page="coder.html">
                <i class="fas fa-code"></i>
                <span>ကုဒ်ရေးခြင်း</span>
                <i class="fas fa-chevron-right arrow"></i>
            </button>
            <hr class="menu-divider">
            <button class="menu-item" data-page="api.html">
                <i class="fas fa-key"></i>
                <span>API Key</span>
                <i class="fas fa-chevron-right arrow"></i>
            </button>
            <button class="menu-item" data-page="setting.html">
                <i class="fas fa-cog"></i>
                <span>ဆက်တင်များ</span>
                <i class="fas fa-chevron-right arrow"></i>
            </button>
            <button class="menu-item" data-page="about.html">
                <i class="fas fa-info-circle"></i>
                <span>အကြောင်း</span>
                <i class="fas fa-chevron-right arrow"></i>
            </button>
        </div>
        
        <div class="sidebar-footer">
            <div class="user-profile">
                <div class="avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-info">
                    <span class="username">အသုံးပြုသူ</span>
                    <span class="user-email">user@example.com</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="main-content">
        <!-- Mobile Header -->
        <div class="mobile-header">
            <button id="menuToggle" class="menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <div class="header-title">BURME AI</div>
            <div class="header-actions">
                <button id="themeToggle" class="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
        
        <!-- Dynamic Content Container -->
        <div id="contentContainer" class="content-container"></div>
    </div>

    <!-- JavaScript Files -->
    <script src="assets/js/main.js"></script>
    <script src="assets/js/router.js"></script>
    <script src="assets/js/theme.js"></script>
    
    <script>
        // DOM Loaded Event
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize loader
            const loader = document.getElementById('loader');
            
            // Simulate loading (remove in production)
            let progress = 0;
            const progressBar = document.querySelector('.progress');
            const loadingInterval = setInterval(() => {
                progress += Math.random() * 10;
                progressBar.style.width = `${Math.min(progress, 100)}%`;
                
                if (progress >= 100) {
                    clearInterval(loadingInterval);
                    loader.style.opacity = '0';
                    setTimeout(() => {
                        loader.style.display = 'none';
                    }, 500);
                    
                    // Load default page
                    loadPage('main.html');
                }
            }, 200);
            
            // Menu Toggle
            const menuToggle = document.getElementById('menuToggle');
            const sidebar = document.getElementById('sidebar');
            const closeSidebar = document.getElementById('closeSidebar');
            
            menuToggle.addEventListener('click', function() {
                sidebar.classList.toggle('active');
            });
            
            closeSidebar.addEventListener('click', function() {
                sidebar.classList.remove('active');
            });
            
            // Menu Item Click Handlers
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Remove active class from all items
                    menuItems.forEach(i => i.classList.remove('active'));
                    // Add active class to clicked item
                    this.classList.add('active');
                    
                    const page = this.getAttribute('data-page');
                    loadPage(page);
                    
                    // Close sidebar on mobile
                    if (window.innerWidth <= 768) {
                        sidebar.classList.remove('active');
                    }
                });
            });
            
            // Dynamic Page Loading Function
            async function loadPage(page) {
                try {
                    const response = await fetch(`src/Pages/${page}`);
                    if (!response.ok) throw new Error('Page not found');
                    
                    const html = await response.text();
                    document.getElementById('contentContainer').innerHTML = html;
                    
                    // Load corresponding JS file
                    const scriptName = page.split('.')[0];
                    await loadScript(`assets/js/${scriptName}.js`);
                    
                    // Update document title
                    const pageTitle = document.querySelector('.page-title');
                    if (pageTitle) {
                        document.title = `${pageTitle.textContent} | BURME AI`;
                    }
                } catch (error) {
                    console.error('Error loading page:', error);
                    document.getElementById('contentContainer').innerHTML = `
                        <div class="error-message">
                            <h2>စာမျက်နှာဖွင့်ရန်မအောင်မြင်ပါ</h2>
                            <p>${page} စာမျက်နှာကိုဖွင့်၍မရပါ။ ကျေးဇူးပြု၍နောက်မှထပ်ကြိုးစားပါ။</p>
                            <button onclick="loadPage('main.html')" class="btn btn-primary">
                                <i class="fas fa-home"></i> အခြေခံစာမျက်နှာသို့
                            </button>
                        </div>
                    `;
                }
            }
            
            // Dynamic Script Loading
            function loadScript(src) {
                return new Promise((resolve, reject) => {
                    // Remove previous script if exists
                    const oldScript = document.querySelector(`script[src="${src}"]`);
                    if (oldScript) oldScript.remove();
                    
                    const script = document.createElement('script');
                    script.src = src;
                    script.onload = resolve;
                    script.onerror = reject;
                    document.body.appendChild(script);
                });
            }
            
            // Close sidebar when clicking outside
            document.addEventListener('click', function(event) {
                if (window.innerWidth <= 768 && 
                    !sidebar.contains(event.target) && 
                    !menuToggle.contains(event.target) &&
                    sidebar.classList.contains('active')) {
                    sidebar.classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>
